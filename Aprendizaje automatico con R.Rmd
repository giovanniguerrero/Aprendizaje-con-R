---
title: 'House Prices: Advanced Regression Techniques'
author: "Luis Giovanni Guerrero Garcia"
date: "28 de febrero 2019"
output:
  html_document:
    df_print: paged
---

### **Competition Description:** 

![figura 1](./housesbanner.PNG)

Ask a home buyer to describe their dream house, and they probably won't begin with the height of the basement ceiling or the proximity to an east-west railroad. But this playground competition's dataset proves that much more influences price negotiations than the number of bedrooms or a white-picket fence.

With 79 explanatory variables describing (almost) every aspect of residential homes in Ames, Iowa, this competition challenges you to predict the final price of each home.
```{r }
library(readxl)
library(knitr)
library(kableExtra)
library(tidyr)
library(ggplot2)
library(RColorBrewer)
library(dplyr)

```
Hacemos una muestra de los datos que contiene la base
```{r}
schema<-read.csv("schema.csv")
train<-read.csv("train.csv")
head( train)%>%kable() %>%
    kable_styling() %>% scroll_box(width = "100%", height = "300px")
```
Ahora mostramos los posibles valores que puede tener
```{r}

Unique_values<-function(Data,n=3){
   valores=NULL
  unicos=sapply((Data), unique)
  for(i in unicos){
    m=ifelse(length(i)<n,length(i),n)
    valores=c(valores,paste0(i[1:m],collapse = ", "))
  }
  return(data.frame(Variable=names(Data),Tipo=sapply(Data, class),Posibles_valores=valores))
}
unicos=Unique_values(train)
summary=merge(x=schema,y=unicos)

summary%>%
kable() %>%
  kable_styling()%>%scroll_box(width = "100%", height = "500px")

```
Analizamos distribuciones 
```{r}
summary(train)

```
Para una rapida iteraccion haremos uso de h2o

```{r}
library(h2o)
#h2o.init(max_mem_size = '6G',nthreads = -1)

target<-"SalePrice"
predictors<-names(train)[-c(1,81)]
#trainh2o<-h2o.importFile("train.csv")
```
Primero realizaremos un auto ml, en la siguiete tabla se muestran los modelos mejor ranqueados.
```{r}
leaderboard<-read.csv('grid.csv')
leaderboard%>%
kable() %>%
  kable_styling()%>%scroll_box(width = "100%", height = "500px")
```

Del mejor modelo obtenemos su variable importance y obsevamos que hay variables que no son muy utilies en el modelo, por lo que las quitamos del model final.

![figura 1](./varimp.PNG)
```{r}
varimp<-read.csv('varimp.csv')
varimp%>%
kable() %>%
  kable_styling()%>%scroll_box(width = "100%", height = "500px")
```


